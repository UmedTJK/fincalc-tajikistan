
# ๐งฑ ARCHITECTURE.md โ ะฐััะธัะตะบัััะฐ ะฟัะพะตะบัะฐ

ะัะพะตะบั: **FinCalc.TJ (v0.4.7)**  
ะััะธัะตะบัััะฝัะน ััะธะปั: *ะฟัะพััะฐั ะผะพะดัะปัะฝะพััั โ ะฟะพััะตะฟะตะฝะฝัะน ะฟะตัะตัะพะด ะบ ES Modules.*

---

## ๐ ะขะตะบััะฐั ััััะบัััะฐ ะฟัะพะตะบัะฐ (v0.4.7)

```

/fincalc-tajikistan
โ
โโโ index.html              # UI, ััััะบัััะฐ ะธะฝัะตััะตะนัะฐ
โโโ style.css               # ััะธะปะธ, ัะตะผั, ะฐะดะฐะฟัะธะฒ
โโโ script.js               # ะพัะฝะพะฒะฝะพะน ะบะพะฝััะพะปะปะตั (UI, state, orchestration)
โ
โโโ /modules
โ   โโโ interest.js         # ัะฐัััั ะฟัะพัะตะฝัะพะฒ ะธ ะฝะฐะปะพะณะฐ
โ   โโโ banks.js            # ะดะฐะฝะฝัะต ะฑะฐะฝะบะพะฒ ะธ ะฒะบะปะฐะดะพะฒ
โ   โโโ charts.js           # ะฟะพะดะณะพัะพะฒะบะฐ ะดะฐะฝะฝัั ะดะปั ะณัะฐัะธะบะพะฒ
โ   โโโ /export
โ       โโโ csv.js          # ัะบัะฟะพัั ัะฐััััะพะฒ ะฒ CSV (Excel)
โ       โโโ pdf.js          # ะณะตะฝะตัะฐัะธั PDF
โ
โโโ assets/                 # ะธะบะพะฝะบะธ, ะธะทะพะฑัะฐะถะตะฝะธั, ััะฐัะธัะตัะบะธะต ัะตััััั
โ
โโโ DATA_BANKS.md           # ัะพัะผะฐั ะธ ะฟัะฐะฒะธะปะฐ ะฑะฐะฝะบะพะฒัะบะธั ะดะฐะฝะฝัั
โโโ AI_GUIDE.md             # ะฟัะฐะฒะธะปะฐ ัะฐะฑะพัั ะะ ั ะฟัะพะตะบัะพะผ
โโโ ROADMAP.md              # ะฟะปะฐะฝั ัะฐะทะฒะธัะธั
โโโ README.md               # ะพะฟะธัะฐะฝะธะต ะฟัะพะตะบัะฐ
โโโ CHANGELOG.md            # ะธััะพัะธั ะธะทะผะตะฝะตะฝะธะน
โโโ VERSIONING.md           # ะฟัะฐะฒะธะปะฐ ะฒะตััะธะพะฝะธัะพะฒะฐะฝะธั
โโโ LICENSE.md              # CC BY-NC

```

---

## ๐ ะัะฝะพะฒะฝัะต ะปะพะณะธัะตัะบะธะต ะฑะปะพะบะธ

| ะคัะฝะบัะธั / ะฑะปะพะบ | ะัะฒะตัััะฒะตะฝะฝะพััั |
|---------------|------------------|
| `calculateDeposit()` | ัะตะฝััะฐะปัะฝะฐั ัะพัะบะฐ ะฟะตัะตััััะฐ ะฟัะธ ะธะทะผะตะฝะตะฝะธะธ ะฒัะพะดะฝัั ะดะฐะฝะฝัั |
| `calculateWithCapitalization()` | ะฟะพะผะตัััะฝัะน ัะฐัััั: ะฟัะพัะตะฝัั, ะฝะฐะปะพะณ, ะบะฐะฟะธัะฐะปะธะทะฐัะธั |
| `calculateAllCapitalizationScenarios()` | ัะฐัััั ะธ ััะฐะฒะฝะตะฝะธะต ััะตะฝะฐัะธะตะฒ ะบะฐะฟะธัะฐะปะธะทะฐัะธะธ |
| `updateTable()` | ะพะฑะฝะพะฒะปะตะฝะธะต ัะฐะฑะปะธัั ัะฐััััะพะฒ (UI) |
| `updateChart()` | ะพะฑะฝะพะฒะปะตะฝะธะต ะณัะฐัะธะบะพะฒ (UI) |
| `exportToExcel()` | UI-ะพะฑะฒัะทะบะฐ ัะบัะฟะพััะฐ CSV |
| `exportToPDF()` | UI-ะพะฑะฒัะทะบะฐ ัะบัะฟะพััะฐ PDF |
| `initBanks()` | ะธะฝะธัะธะฐะปะธะทะฐัะธั ะฒัะฑะพัะฐ ะฑะฐะฝะบะฐ ะธ ะดะตะฟะพะทะธัะฐ |

---

## ๐ง ะะฝัััะตะฝะฝัั ะฐััะธัะตะบัััะฐ `script.js` (v0.4.7)

ะคะฐะนะป `script.js` ััััะบัััะธัะพะฒะฐะฝ ั ะฟะพะผะพััั **ัะบะพัะฝัั ะฐััะธัะตะบัััะฝัั ัะตะบัะธะน**.  
ะะพะณะธะบะฐ ะธ ะฟะพะฒะตะดะตะฝะธะต ะฟัะธะปะพะถะตะฝะธั **ะฝะต ะธะทะผะตะฝัะปะธัั**, ัะตัะฐะบัะพั ะฝะพัะธั ะธัะบะปััะธัะตะปัะฝะพ
ััััะบัััะฝัะน ะธ ะดะพะบัะผะตะฝัะฐัะธะพะฝะฝัะน ัะฐัะฐะบัะตั.

### ะััะธัะตะบัััะฝัะต ัะตะบัะธะธ:

1. **Global State & Constants**
   - ะณะปะพะฑะฐะปัะฝะพะต ัะพััะพัะฝะธะต ะฟัะธะปะพะถะตะฝะธั
   - `calculations`
   - `depositChart`
   - `capitalizationType`
   - `shareData`

2. **Utility & Helper Functions**
   - ัะธัััะต ะฒัะฟะพะผะพะณะฐัะตะปัะฝัะต ััะฝะบัะธะธ
   - ัะพัะผะฐัะธัะพะฒะฐะฝะธะต ัะธัะตะป ะธ ะดะฐั
   - ะฝะต ะทะฐะฒะธััั ะพั DOM ะธ ะณะปะพะฑะฐะปัะฝะพะณะพ state

3. **Core Calculation Logic**
   - ะฑะธะทะฝะตั-ะปะพะณะธะบะฐ ัะฐััััะฐ ะดะตะฟะพะทะธัะฐ
   - ะบะฐะฟะธัะฐะปะธะทะฐัะธั ะฟัะพัะตะฝัะพะฒ
   - ััะตะฝะฐัะธะธ ััะฐะฒะฝะตะฝะธั (none / manual / auto)

4. **UI Rendering & DOM Updates**
   - ัะฐะฑะปะธัะฐ ัะฐััััะพะฒ
   - ะณัะฐัะธะบะธ Chart.js
   - ะฒะธะทัะฐะปัะฝัะต ะพะฑะฝะพะฒะปะตะฝะธั ะธะฝัะตััะตะนัะฐ

5. **Export Logic**
   - ัะบัะฟะพัั CSV (Excel)
   - ัะบัะฟะพัั PDF
   - ะธัะฟะพะปัะทะพะฒะฐะฝะธะต ะผะพะดัะปะตะน `/modules/export/*`

6. **Share Logic**
   - Web Share API
   - fallback ัะตัะตะท Clipboard API
   - ะณะตะฝะตัะฐัะธั ัะตะบััะฐ ัะฐััััะฐ
   - ัะบัะธะฝัะพั ะณัะฐัะธะบะฐ
   - ัััะปะบะธ ะฝะฐ ัะพัะธะฐะปัะฝัะต ัะตัะธ

7. **Theme & UI Configuration**
   - ัะตะผั ะพัะพัะผะปะตะฝะธั
   - ัะพััะฐะฝะตะฝะธะต ะฒัะฑัะฐะฝะฝะพะน ัะตะผั ะฒ LocalStorage
   - UI-ะฝะฐัััะพะนะบะธ ะฒะฝะตัะฝะตะณะพ ะฒะธะดะฐ

8. **App Initialization & Event Listeners**
   - `DOMContentLoaded`
   - ะฟะพะดะฟะธัะบะฐ ะฝะฐ ัะพะฑััะธั UI
   - ะธะฝะธัะธะฐะปะธะทะฐัะธั ะผะพะดัะปะตะน
   - ะฟะตัะฒะธัะฝัะน ัะฐัััั ะฟัะธ ะทะฐะณััะทะบะต ัััะฐะฝะธัั

---

## ๐งฉ ะะตะฐะปะธะทะพะฒะฐะฝะฝัะต ะผะพะดัะปะธ

### `interest.js`
ะะพะดัะปั ัะธะฝะฐะฝัะพะฒัั ัะฐััััะพะฒ.

ะะฐะทะฝะฐัะตะฝะธะต:
- ัะฐัััั ะฝะฐัะธัะปะตะฝะฝัั ะฟัะพัะตะฝัะพะฒ
- ัะฐัััั ะฝะฐะปะพะณะฐ
- ะฒะพะทะฒัะฐั ัะธััะพะณะพ ะดะพัะพะดะฐ

ะญะบัะฟะพัั:
- `calculateMonthlyInterest(amount, annualRate, taxRate)`

---

### `banks.js`
ะกะพะดะตัะถะธั ััััะบัััะธัะพะฒะฐะฝะฝัะต ะดะฐะฝะฝัะต ะฟะพ ะดะตะฟะพะทะธัะฐะผ ะฑะฐะฝะบะพะฒ ะขะฐะดะถะธะบะธััะฐะฝะฐ.

ะะฐะทะฝะฐัะตะฝะธะต:
- ะพัะดะตะปะตะฝะธะต ะดะฐะฝะฝัั ะพั UI-ะปะพะณะธะบะธ
- ัะฟัะพัะตะฝะธะต ะฟะพะดะดะตัะถะบะธ ะธ ะพะฑะฝะพะฒะปะตะฝะธะน
- ะฟะพะดะณะพัะพะฒะบะฐ ะบ ะฑัะดััะตะผั API / JSON-ะธััะพัะฝะธะบั

ะญะบัะฟะพัั:
- `banksData`

---

### `charts.js`
ะะพะดะณะพัะพะฒะบะฐ ะดะฐะฝะฝัั ะดะปั ะณัะฐัะธะบะพะฒ ัะพััะฐ ะดะตะฟะพะทะธัะฐ.

ะัะฒะตัััะฒะตะฝะฝะพััั:
- ัะพัะผะธัะพะฒะฐะฝะธะต ะฒัะตะผะตะฝะฝัั ััะดะพะฒ
- ะฟะพะดะณะพัะพะฒะบะฐ ะดะฐะฝะฝัั ะดะปั ััะฐะฒะฝะตะฝะธั ััะตะฝะฐัะธะตะฒ
- ะพััััััะฒะธะต ะทะฐะฒะธัะธะผะพััะตะน ะพั DOM ะธ Chart.js

---

### `export/csv.js`
ะะตะฝะตัะฐัะธั CSV-ะพััััะฐ ะดะปั Excel.

ะัะฒะตัััะฒะตะฝะฝะพััั:
- ะณะตะฝะตัะฐัะธั CSV-ะบะพะฝัะตะฝัะฐ
- ะพััััััะฒะธะต DOM-ะดะพัััะฟะฐ
- ัะธััะฐั ััะฝะบัะธั ะฑะตะท ะฟะพะฑะพัะฝัั ัััะตะบัะพะฒ

---

### `export/pdf.js`
ะะตะฝะตัะฐัะธั HTML-ะบะพะฝัะตะฝัะฐ ะดะปั ะฟะตัะฐัะธ ะธ ัะพััะฐะฝะตะฝะธั ะฒ PDF.

ะัะฒะตัััะฒะตะฝะฝะพััั:
- ะฟะพะดะณะพัะพะฒะบะฐ ะฟะตัะฐัะฝะพะณะพ ะพััััะฐ
- ะพััััััะฒะธะต ะฟััะผะพะณะพ ะดะพัััะฟะฐ ะบ DOM
- ะธัะฟะพะปัะทะพะฒะฐะฝะธะต ะดะฐะฝะฝัั, ะฟะตัะตะดะฐะฝะฝัั ะธะท `script.js`

---

## ๐ฅ ะัะธะฝัะธะฟั ัะฐะทัะฐะฑะพัะบะธ

- ะงะธัััะน JavaScript (ES6+)
- ะะพัะฐะณะพะฒะฐั ะธ ะฑะตะทะพะฟะฐัะฝะฐั ะผะพะดัะปัะธะทะฐัะธั
- ะะฐััััั ะฒัะตะณะดะฐ ะพัะดะตะปะตะฝั ะพั DOM
- UI โ ะฝะฐ ััััะบะพะผ ัะทัะบะต
- ะะพะด โ ะฝะฐ ะฐะฝะณะปะธะนัะบะพะผ ัะทัะบะต
- ะะธะฝะธะผัะผ ะทะฐะฒะธัะธะผะพััะตะน
- ะะพะด ะดะพะปะถะตะฝ ะฑััั ะฟะพะฝััะตะฝ:
  - ัััะดะตะฝัั
  - ะะ
  - ัะฐะทัะฐะฑะพััะธะบั ะฑะตะท ะบะพะฝัะตะบััะฐ ะฟัะพะตะบัะฐ

---

## ๐ ะงัะพ ะทะฐะฟัะตัะตะฝะพ (ะฝะฐ ัะตะบััะตะผ ััะฐะฟะต)

- ะคัะตะนะผะฒะพัะบะธ (React / Vue / Angular)
- TypeScript
- Backend / ะฑะฐะทั ะดะฐะฝะฝัั
- ะกะผะตะฝะฐ ะฝะฐะปะพะณะพะฒะพะน ะปะพะณะธะบะธ
- ะะฝะพะณะพัััะฐะฝะธัะฝัะน ะธะฝัะตััะตะนั
- ะะณัะตััะธะฒะฝัะน ัะตัะฐะบัะพั ะฑะตะท ะฝะตะพะฑัะพะดะธะผะพััะธ

---

## ๐ ะะปะฐะฝะธััะตะผะพะต ัะฐะทะดะตะปะตะฝะธะต (ะบ v0.6.x)

> โ๏ธ ะะธะถะต โ **ะฟะปะฐะฝ ัะฐะทะฒะธัะธั**, ะฝะต ัะตะบััะฐั ัะตะฐะปะธะทะฐัะธั.

```

/modules
โโโ interest.js
โโโ banks.js
โโโ charts.js
โโโ share.js          # ะปะพะณะธะบะฐ ัะฐัะธะฝะณะฐ
โโโ /export
โโโ csv.js
โโโ pdf.js

```

---

## ๐ Deployment

ะัะพะตะบั ัะฐะทะฒััะฝัั ะบะฐะบ **ััะฐัะธัะตัะบะธะน ัะฐะนั** ั ะธัะฟะพะปัะทะพะฒะฐะฝะธะตะผ GitHub Pages.  
ะกะตัะฒะตัะฝะฐั ะปะพะณะธะบะฐ ะธ backend ะพััััััะฒััั.

---

## โ ะกัะฐััั ะฟัะพะตะบัะฐ

- ๐ฆ ะะพะด โ ััะฐะฑะธะปัะฝัะน  
- ๐งผ ะััะธัะตะบัััะฐ โ ััััะบัััะธัะพะฒะฐะฝะฐ (refactor-only)  
- ๐ ะะพะบัะผะตะฝัะฐัะธั โ ัะธะฝััะพะฝะธะทะธัะพะฒะฐะฝะฐ  
- ๐ท ะะตััะธั โ `v0.4.7`

**ะญัะฐะฟ v0.4.x ะพัะธัะธะฐะปัะฝะพ ะทะฐะบััั.**
